<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bayburt Sofrasƒ± | Ne Yesek?</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Bayburt Temasƒ± Renkleri (Sarƒ± ta≈ülar, Toprak tonlarƒ±) */
            --gold-light: #f1c40f;
            --gold-dark: #d35400;
            --stone-dark: #2c3e50;
            --stone-light: #ecf0f1;
            
            --glass-bg: rgba(255, 255, 255, 0.94);
            --shadow: 0 10px 40px 0 rgba(0, 0, 0, 0.2);
            --radius: 20px;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Montserrat', sans-serif;
            transition: background 0.8s ease;
            color: #2d3436;
        }

        /* Arkaplan Modlarƒ± */
        body.mode-breakfast {
            /* Sabah G√ºne≈üi: Sarƒ±dan Turuncuya */
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
        }
        body.mode-dinner {
            /* Bayburt Ak≈üamƒ±: Koyu Ta≈ü Rengi ve Lacivert */
            background: linear-gradient(135deg, #2c3e50 0%, #4ca1af 100%);
        }

        /* Ana Kart */
        .app-card {
            background: var(--glass-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 450px;
            padding: 2rem;
            text-align: center;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        h1 {
            font-size: 1.6rem;
            font-weight: 700;
            margin: 0 0 5px 0;
            color: #2d3436;
        }
        
        .subtitle {
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        /* Sekmeler */
        .tab-wrapper {
            background: rgba(0,0,0,0.05);
            border-radius: 50px;
            padding: 4px;
            display: flex;
            margin-bottom: 1.5rem;
        }

        .tab-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 50px;
            background: transparent;
            font-family: inherit;
            font-weight: 600;
            font-size: 0.9rem;
            color: #7f8c8d;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: #fff;
            color: #d35400; /* Kiremit Rengi */
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        /* Sonu√ß Alanƒ± */
        .result-container {
            min-height: 230px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 12px;
            margin-bottom: 1.5rem;
        }

        .placeholder-text {
            color: #95a5a6;
            font-style: italic;
            font-size: 0.95rem;
        }

        .food-card {
            background: #fff;
            border-radius: 16px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border-left: 5px solid #d35400;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: none;
        }

        .food-card.show {
            display: flex;
            opacity: 1;
            transform: translateY(0);
        }

        .emoji-box {
            font-size: 2.2rem;
            min-width: 50px;
            text-align: center;
        }

        .info-box {
            text-align: left;
            flex: 1;
        }

        .category-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #95a5a6;
            font-weight: 700;
            display: block;
            margin-bottom: 3px;
        }

        .food-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
            line-height: 1.25;
        }

        /* Ana Buton */
        .magic-btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 16px;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 700;
            color: #fff;
            cursor: pointer;
            background: linear-gradient(45deg, #d35400, #f39c12); /* Bayburt Sarƒ±sƒ±/Turuncusu */
            box-shadow: 0 8px 20px rgba(211, 84, 0, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .magic-btn:active { transform: scale(0.97); }

        /* Ak≈üam Modu Buton Rengi */
        body.mode-dinner .magic-btn {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            box-shadow: 0 8px 20px rgba(44, 62, 80, 0.3);
        }

        .history-msg {
            margin-top: 15px;
            font-size: 0.75rem;
            color: #7f8c8d;
            min-height: 20px;
            font-weight: 500;
        }

    </style>
</head>
<body class="mode-breakfast">

    <div class="app-card">
        <h1>Bayburt Sofrasƒ± üè∞</h1>
        <p class="subtitle">Hem y√∂resel, hem pratik, hem bizden.</p>
        
        <div class="tab-wrapper">
            <button class="tab-btn active" onclick="setMode('breakfast')" data-mode="breakfast">‚òÄÔ∏è Kahvaltƒ±</button>
            <button class="tab-btn" onclick="setMode('dinner')" data-mode="dinner">üåô Ak≈üam Men√ºs√º</button>
        </div>

        <div class="result-container" id="result-area">
            <div class="placeholder-text" id="placeholder">Bug√ºn ne yesek? Tƒ±kla gelsin...</div>

            <div class="food-card" id="card-breakfast">
                <div class="emoji-box" id="bf-emoji">üßÄ</div>
                <div class="info-box">
                    <span class="category-label">G√ºne Ba≈ülangƒ±√ß</span>
                    <div class="food-name" id="bf-name">...</div>
                </div>
            </div>

            <div class="food-card" id="card-soup">
                <div class="emoji-box" id="soup-emoji">ü•£</div>
                <div class="info-box">
                    <span class="category-label">√áorba</span>
                    <div class="food-name" id="soup-name">...</div>
                </div>
            </div>

            <div class="food-card" id="card-main">
                <div class="emoji-box" id="main-emoji">ü•ò</div>
                <div class="info-box">
                    <span class="category-label">Ana Yemek</span>
                    <div class="food-name" id="main-name">...</div>
                </div>
            </div>
        </div>

        <button class="magic-btn" onclick="rollDice()" id="action-btn">Kahvaltƒ± Se√ß</button>
        <div class="history-msg" id="msg-box"></div>
    </div>

    <script>
        /* --- VERƒ∞ HAVUZU (Bayburt + Pratik √ñƒürenci) --- */
        
        const breakfastItems = [
            // Y√∂resel Dokunu≈ülar
            { name: "Bayburt Ketesi & √áay", emoji: "ü•ê" },
            { name: "Kuymak (Mƒ±hlama)", emoji: "üßÄ" },
            { name: "Kavut (Pekmezli/≈ûekerli)", emoji: "üçØ" }, // Kavut Bayburt'ta me≈ühurdur
            { name: "Civil Peyniri & Tereyaƒüƒ±", emoji: "üßÄ" },
            
            // Standart Pratik
            { name: "Sucuklu Yumurta", emoji: "üç≥" },
            { name: "Menemen", emoji: "üçÖ" },
            { name: "Sahanda Peynirli Yumurta", emoji: "üç≥" },
            { name: "Ha≈ülanmƒ±≈ü Yumurta & Zeytin", emoji: "ü•ö" },
            { name: "Patates Kƒ±zartmasƒ± & Yumurta", emoji: "üçü" },
            { name: "Ka≈üarlƒ± Tost", emoji: "ü•™" },
            { name: "Simit & √ú√ßgen Peynir", emoji: "ü•Ø" },
            { name: "Soƒüuk Sandvi√ß", emoji: "ü•¨" },
            { name: "Krep (Pancake)", emoji: "ü•û" },
            { name: "Omlet (Sade/Peynirli)", emoji: "üç≥" }
        ];

        const soups = [
            // Y√∂resel & Klasik
            { name: "Kavut √áorbasƒ±", emoji: "ü•£" },
            { name: "Ayran A≈üƒ± (Soƒüuk/Sƒ±cak)", emoji: "ü•õ" },
            { name: "Mercimek √áorbasƒ±", emoji: "ü•£" },
            { name: "Yayla √áorbasƒ±", emoji: "üåø" },
            { name: "Tel ≈ûehriye √áorbasƒ±", emoji: "üçú" },
            { name: "Tarhana √áorbasƒ±", emoji: "ü•Ñ" },
            { name: "Ezogelin √áorbasƒ±", emoji: "üç≤" },
            { name: "Domates √áorbasƒ± (Ka≈üarlƒ±)", emoji: "üçÖ" },
            { name: "Kesme √áorbasƒ± (Eri≈üteli)", emoji: "üçú" }
        ];

        const dinners = [
            // BAYBURT VE Y√ñRESEL (Pratikle≈ütirilmi≈ü)
            { name: "Ziron (Siron)", emoji: "ü•ü" }, // Yufka ve yoƒüurtla √ßok kolay yapƒ±lƒ±r
            { name: "Galaco≈ü (Mercimekli)", emoji: "ü•ò" }, // Bayburt klasiƒüi
            { name: "Ek≈üi Lahana", emoji: "ü•¨" },
            { name: "Lor Dolmasƒ± (Hazƒ±r/Anne)", emoji: "üßÜ" },
            { name: "Tatar B√∂reƒüi (Sarƒ±msaklƒ±)", emoji: "ü•ü" },
            { name: "Su B√∂reƒüi (Yalancƒ±/Hazƒ±r)", emoji: "üßÄ" },

            // PRATƒ∞K √ñƒûRENCƒ∞ / BEKAR
            { name: "Sal√ßalƒ± Makarna", emoji: "üçù" },
            { name: "Tavuk Sote (Biberli)", emoji: "üçó" },
            { name: "Kuru Fasulye & Pilav", emoji: "ü•ò" },
            { name: "Nohut Yemeƒüi & Tur≈üu", emoji: "üç≤" },
            { name: "Taze Fasulye", emoji: "ü•¨" },
            { name: "Izgara K√∂fte & Patates", emoji: "üçñ" },
            { name: "Ispanak Yemeƒüi (Yoƒüurtlu)", emoji: "üåø" },
            { name: "Kƒ±ymalƒ± Makarna", emoji: "üçù" },
            { name: "Sosisli Makarna", emoji: "üå≠" },
            { name: "Fƒ±rƒ±nda Tavuk Baget", emoji: "üçó" },
            { name: "Ton Balƒ±klƒ± Salata", emoji: "ü•ó" },
            { name: "Hazƒ±r Mantƒ±", emoji: "ü•ü" },
            { name: "Patates Oturtma", emoji: "ü•î" },
            { name: "Bulgur Pilavƒ± & Ayran", emoji: "üçö" },
            { name: "Eri≈üte (Cevizli/Peynirli)", emoji: "üçú" }
        ];

        /* --- Sƒ∞STEM DEƒûƒ∞≈ûKENLERƒ∞ --- */
        let currentMode = 'breakfast';
        const bufferSize = 8; // Tekrar etmeme hafƒ±zasƒ±
        let sessionHistory = { breakfast: [], dinner: [] };

        /* --- UI FONKSƒ∞YONLARI --- */
        function setMode(mode) {
            currentMode = mode;
            
            document.body.className = `mode-${mode}`;
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.dataset.mode === mode) btn.classList.add('active');
            });

            const btn = document.getElementById('action-btn');
            btn.innerText = mode === 'breakfast' ? 'Sabahlƒ±ƒüƒ± Se√ß' : 'Ak≈üam Men√ºs√º Kur';

            resetDisplay();
        }

        function resetDisplay() {
            document.getElementById('placeholder').style.display = 'block';
            document.getElementById('msg-box').innerText = '';
            
            ['card-breakfast', 'card-soup', 'card-main'].forEach(id => {
                document.getElementById(id).classList.remove('show');
            });
        }

        /* --- MANTIK --- */
        function getDateKey() {
            const d = new Date();
            return `${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`;
        }
        
        function getYesterdayKey() {
            const d = new Date();
            d.setDate(d.getDate() - 1);
            return `${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`;
        }

        function getSmartChoice(pool, type, yesterdayForbidden) {
            let candidates = pool.filter(item => {
                const isYesterday = (item.name === yesterdayForbidden);
                const isInSession = sessionHistory[type].includes(item.name);
                return !isYesterday && !isInSession;
            });

            if (candidates.length === 0) {
                sessionHistory[type] = [];
                candidates = pool.filter(item => item.name !== yesterdayForbidden);
            }

            const choice = candidates[Math.floor(Math.random() * candidates.length)];

            sessionHistory[type].push(choice.name);
            if(sessionHistory[type].length > bufferSize) sessionHistory[type].shift();

            return choice;
        }

        function rollDice() {
            const today = getDateKey();
            const yesterday = getYesterdayKey();
            const msgBox = document.getElementById('msg-box');
            
            resetDisplay(); // √ñnce temizle
            document.getElementById('placeholder').style.display = 'none';

            if (currentMode === 'breakfast') {
                // --- KAHVALTI ---
                const history = JSON.parse(localStorage.getItem('hist_bf_bayburt')) || {};
                const forbidden = (history.date === yesterday) ? history.item : null;

                const choice = getSmartChoice(breakfastItems, 'breakfast', forbidden);

                setTimeout(() => {
                    document.getElementById('bf-emoji').innerText = choice.emoji;
                    document.getElementById('bf-name').innerText = choice.name;
                    document.getElementById('card-breakfast').classList.add('show');
                    
                    if(forbidden) msgBox.innerText = `Not: D√ºn sabahki (${forbidden}) listeden √ßƒ±karƒ±ldƒ±.`;
                    else msgBox.innerText = "Afiyet olsun!";

                    localStorage.setItem('hist_bf_bayburt', JSON.stringify({ date: today, item: choice.name }));
                }, 100);

            } else {
                // --- AK≈ûAM ---
                const history = JSON.parse(localStorage.getItem('hist_dn_bayburt')) || {};
                const forbidden = (history.date === yesterday) ? history.main : null;

                const soup = soups[Math.floor(Math.random() * soups.length)];
                const main = getSmartChoice(dinners, 'dinner', forbidden);

                // Sƒ±ralƒ± Animasyon
                setTimeout(() => {
                    document.getElementById('soup-emoji').innerText = soup.emoji;
                    document.getElementById('soup-name').innerText = soup.name;
                    document.getElementById('card-soup').classList.add('show');

                    setTimeout(() => {
                        document.getElementById('main-emoji').innerText = main.emoji;
                        document.getElementById('main-name').innerText = main.name;
                        document.getElementById('card-main').classList.add('show');
                    }, 150);

                    if(forbidden) msgBox.innerText = `Not: D√ºn ak≈üamki (${forbidden}) filtrelendi.`;
                    else msgBox.innerText = "Bayburt usul√º men√ºn hazƒ±r!";

                    localStorage.setItem('hist_dn_bayburt', JSON.stringify({ date: today, main: main.name }));
                }, 100);
            }
        }
    </script>
</body>
</html>
